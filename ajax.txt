 if (response) {

            $.ajax({
                url: '/admin/editProduct/'+pId,
                method: 'get',
                success: (response) => {
                    console.log(response)
                }
            })

        }




        function addProductSpec(value) {
        console.log('This is' + value)

        if (value == "mobile") {

            document.getElementById('laptop').innerHTML = '';
            document.getElementById('titleLaptop').innerHTML = '';
            var selectedMobile = true;
            var thediv = document.getElementById('titleMobile');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Add mobile Specs</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "width" class="form-control mb-5" name="width"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Dimension" class="form-control mb-5" name="dimension"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "size" class="form-control mb-5" name="size"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "color" class="form-control mb-5" name="color"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Technical Specifications</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item height" class="form-control mb-5" name="itemHeight"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Screen size" class="form-control mb-5" name="screenSize"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item width" class="form-control mb-5" name="itemWidth"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Product dimensions" class="form-control mb-5" name="productDimentions"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item model number" class="form-control mb-5" name="itemModelNumber"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Processor" class="form-control mb-5" name="processor"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Ram" class="form-control mb-5" name="ram"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Avg battery life" class="form-control mb-5" name="avgBatteryLife"></input>'
            thediv.appendChild(extras)

        }

        if (value == "laptop") {
            document.getElementById('mobile').innerHTML = '';
            document.getElementById('titleMobile').innerHTML = '';
            var selectedLaptop = true;
            var thediv = document.getElementById('titleLaptop');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Add laptop Specs</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "width" class="form-control mb-5" name="width"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Dimension" class="form-control mb-5" name="dimension"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "size" class="form-control mb-5" name="size"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "color" class="form-control mb-5" name="color"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Technical Specifications</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item height" class="form-control mb-5" name="itemHeight"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Screen size" class="form-control mb-5" name="screenSize"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item width" class="form-control mb-5" name="itemWidth"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Product dimensions" class="form-control mb-5" name="productDimensions"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item model number" class="form-control mb-5" name="itemModelNumber"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Processor" class="form-control mb-5" name="processor"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Ram" class="form-control mb-5" name="ram"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Avg battery life" class="form-control mb-5" name="avgBatteryLife"></input>'
            thediv.appendChild(extras)

        }

        return name;
    }
</script>


 if(price.trim() == " " || price.length < 5 || isNaN(price)){
            document.getElementById("productTitle").focus
            if(price == ""){
            document.getElementById("productNameErr").innerHTML = "Filed cannot be empty"
            }else if(price.length < 3){
             document.getElementById("productNameErr").innerHTML = "Minimum length required"   
            }
            event.preventDefault()
        }


         setTimeout(function () {
            document.getElementById("invalid").innerHTML = "";
        }, 4000);


        button {
            width: 50px;
            height: 40px;
            margin: 25px auto 0px auto;
            font-family: arimo;
            font-size: 1.1rem;
            border: none;
            border-radius: 5px;
            letter-spacing: 2px;
            cursor: pointer;
            background: #616161;
            /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #9bc5c3, #616161);
            /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #9bc5c3, #616161);
            /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

        }


        // ajax call for login with phone number
	$('#logPhone').click(function(e) {
		console.log("This is ajax call")
		$.ajax({
			url : "/enterPhn",
			method :  "GET",
			success : function (){
				
			}
		})
	})
	

    {
                    $project : {
                        productDetails : 1,
                        quantity : 1
                    }
                }



                {
                    $group : {
                        _id : null,
                        totalAmount : {
                            $sum :{
                                $multiply :['$quantity','($productDetails.price)']
                            }
                        }
                    }
                }


                // this is razorpay button
                 document.getElementById('rzp-button1').onclick = function (e) {
            rzp1.open();
            e.preventDefault();




///*****************  from cancel order
             let productLen = await db.get().collection(collection.ORDER_COLLECTION).aggregate([{
                $match: {
                    _id: ObjectID(body.orderId)
                }
            },
            {
                $project: {
                    products: 1,
                    _id: 0
                }
            }
        ]).toArray()
        
        console.log(productLen);

            let copy = await db.get().collection(collection.ORDER_COLLECTION).findOne({
                _id: ObjectID(body.orderId)
            }, {
                projection: {
                    _id: 0
                }
            })
            db.get().collection(collection.ORDER_COLLECTION).insertOne(copy)

            db.get().collection(collection.ORDER_COLLECTION).updateOne({
                _id: ObjectID(body.orderId)
            }, {
                $unset : 'products'
            },
            {
                $set: {
                    products : product,
                    status: 'cancelled',
                    placed: false,
                    shipped: false,
                    deliverd: false,
                    cancelled: true,
                }
            })

            if(productLen.length <= 1){
                db.get().collection(collection.ORDER_COLLECTION).deleteOne({
                    _id : ObjectID(body.orderId)
                })
            }


 //******* add to cart get method ***********
                        router.get('/addToCart/:id', (req, res, next) => {

                        console.log(req.params.id);
                        if (req.session.user) { 
                            console.log("User exists");
                            let userId = req.session.user._id;
                            let proId = req.params.id;

                            userProductHelper.addToCart(userId, proId).then((result) => {
                            console.log(result.ops);
                            })
                            console.log("This is add to cart count in /addToCart");

                            res.send(userStatus = true)
                        } else {
                            res.send(userStatus = false)
                        }
                        })
// ********** add to cart ajax call ******************
                        function addToCart(proId) {

                        console.log("This is addtoacart");
                        $.ajax({
                            url: '/addToCart/' + proId,
                            method: 'get',
                            success: function (response) {
                                if (response == true) {
                                    Swal.fire({
                                        position: 'center',
                                        icon: 'success',
                                        title: 'Produt added to cart',
                                        showConfirmButton: false,
                                        timer: 1000
                                    })
                                } else {
                                    Swal.fire({
                                        title: 'Please login to continue!',
                                        icon: 'warning',
                                        showCancelButton: true,
                                        confirmButtonColor: '#42ba96',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Login'
                                    }).then((result) => {
                                        if (result.isConfirmed) {
                                            location.href = '/login'
                                        }
                                    })

                                }
                            }
                        })
                    }


                    /// address validation

                     else if (firstName.trim() == "" && firstName < 3 && !firstName.match(letters)) {
                document.getElementById('firstNameErr').innerHTML = 'Valid first name reqired'
            }
            else if(lastName.trim() == "" && lastName < 3 && !lastName.match(letters)){
                document.getElementById('lastNameErr').innerHTML = 'Valid last name reqired'
            }   
            else if(address.trim() == "" && address < 3 && !address.match(letters)) {
                document.getElementById('addressErr').innerHTML = 'Valid address reqired'
            }
            else if(state.trim() == "" && state < 3 && !state.match(letters)){
                document.getElementById('stateErr').innerHTML = 'Valid state reqired'               
            }
            else if(district.trim() == "" && district < 3 && !district.match(letters)){
                document.getElementById('districtErr').innerHTML = 'Valid district reqired'               
            }
            else if(city.trim() == "" && city < 3 && !city.match(letters)){
                document.getElementById('cityErr').innerHTML = 'Valid city reqired'               
            }
            else if(postcode.trim() == "" && postcode < 3 && isNaN(postcode)){
                document.getElementById('postcodeErr').innerHTML = 'Valid postcode reqired'               
            }
            \



            function validateForm() {
    console.log("validate form")
     let fname = document.forms["editProfile"]["firstName"].value;   
     var lname = this.querySelector("input[id=lastName]").value;        
     var email= this.querySelector("input[id=email]").value;
     var regx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
     
     if(fname.trim() == "" || fname<2){
        document.getElementById('firstName').focus();
        document.getElementById('fNameErr').innerHTML = "Enter valid first name"
        alert('please fill the form')
        return false
    }
    else{
        document.getElementById('fNameErr').innerHTML = ""
    }
    if(lname.trim() == "" || lname<2){
        document.getElementById('lastName').focus();
        document.getElementById('fNameErr').innerHTML = "Enter valid last name"      
        return false
    }
    else{
        document.getElementById('lNameErr').innerHTML = ""
    }
    if(email.trim() == "" || !email.match(regx)){
        document.getElementById('email').focus()
        document.getElementById('fNameErr').innerHTML = "Enter valid email"
        return false
    }
    else{
        document.getElementById('emailErr').innerHTML = ""
    }
}


/////////////////////////////////////////////////////////////////////////////////////////////// address form from checkout 

            <div class="js-form-message mb-6 col-md-12">
                                        <label class="form-label">
                                            Address type
                                            <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-control" name="addressType" id="addressType"
                                            onchange="selectAddress(this.value,'{{userId._id}}')"
                                            data-swal-toast-template="#my-template">
                                            <option value="">Enter the address type</option>
                                            {{#each addressType}}
                                            <option value={{this.addressType}}>{{this.addressType}}</option>
                                            {{/each}}
                                        </select>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- Input -->

                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                First name
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="firstName" id="firstName"
                                                placeholder="" aria-label="Jack"
                                                data-msg="Please enter your frist name." data-error-class="u-has-error"
                                                data-success-class="u-has-success" autocomplete="off">
                                            <span style="color: brown;" id="firstNameErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>

                                    <div class="col-md-6">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                Last name
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="lastName" id="lastName"
                                                placeholder="" aria-label="Wayley"
                                                data-msg="Please enter your last name." data-error-class="u-has-error"
                                                data-success-class="u-has-success">
                                            <span style="color: brown;" id="lastNameErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>

                                    <div class="w-100"></div>

                                    <div class="col-md-12">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                Address
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="address" id="address"
                                                placeholder="" aria-label="Company Name"
                                                data-msg="Please enter a company name." data-error-class="u-has-error"
                                                data-success-class="u-has-success">
                                            <span style="color: brown;" id="addressErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>

                                    <div class="col-md-12">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                State
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="state" placeholder=""
                                                id="state" aria-label="Company Name"
                                                data-msg="Please enter a company name." data-error-class="u-has-error"
                                                data-success-class="u-has-success">
                                            <span style="color: brown;" id="stateErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>



                                    <div class="col-md-8">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                District
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="district" placeholder=""
                                                id="district" aria-label="470 Lucy Forks"
                                                data-msg="Please enter a valid address." data-error-class="u-has-error"
                                                data-success-class="u-has-success">
                                            <span style="color: brown;" id="districtErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>



                                    <div class="col-md-6">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                City
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="city" id="city" placeholder=""
                                                aria-label="London" data-msg="Please enter a valid address."
                                                data-error-class="u-has-error" data-success-class="u-has-success"
                                                autocomplete="off">
                                            <span style="color: brown;" id="cityErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>

                                    <div class="col-md-6">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                Postcode/Zip
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" name="postcode" id="postcode"
                                                placeholder="" aria-label="99999"
                                                data-msg="Please enter a postcode or zip code."
                                                data-error-class="u-has-error" data-success-class="u-has-success">
                                            <span style="color: brown;" id="postcodeErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>

                                    <div class="w-100"></div>



                                    <div class="col-md-6">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                Email address
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="email" class="form-control" name="emailAddress"
                                                id="emailAddress" placeholder="" aria-label="jackwayley@gmail.com"
                                                data-msg="Please enter a valid email address."
                                                data-error-class="u-has-error" data-success-class="u-has-success">
                                            <span style="color: brown;" id="emailAddressErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>

                                    <div class="col-md-6">
                                        <!-- Input -->
                                        <div class="js-form-message mb-6">
                                            <label class="form-label">
                                                Phone
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control" placeholder="" id="phone"
                                                aria-label="+1 (062) 109-9222" name="phone"
                                                data-error-class="u-has-error" data-success-class="u-has-success">
                                            <span style="color: brown;" id="phoneErr"></span>

                                        </div>
                                        <!-- End Input -->
                                    </div>


     //////////////////////////////////////////////////////////////////

    $('#billingDetails').serialize()
     /////////////////////////////////////////////////////////////////                               

//////////////////////////////////////////////////////////////


    // ********** myForm Post **************
    $('#MyForm').submit((e) => {
        e.preventDefault()
        $.ajax({
            url: '/checkout',
            method: 'post',
            data: $('#MyForm').serialize(),
            success: (response) => {
                console.log(response)
                if (response.status == true) {
                    console.log("This is status true")
                    Swal.fire({
                        position: 'center',
                        icon: 'success',
                        title: 'Order placed successfully',
                        showConfirmButton: false,
                        timer: 1000
                    }).then(() => {
                        location.href = '/orderSuccess'
                    })
                } else {
                    razorpayPayment(response.response)
                }
            }
        })
    })

    ////////////////////////////////////////////////////////////////

        // ********** newForm Post **************
    $('#newForm').submit((e) => {
        e.preventDefault()
        $.ajax({
            url: '/checkout',
            method: 'post',
            data: $('#newForm').serialize(),
            success: (response) => {
                console.log(response)
                if (response.status == true) {
                    console.log("This is status true")
                    Swal.fire({
                        position: 'center',
                        icon: 'success',
                        title: 'Order placed successfully',
                        showConfirmButton: false,
                        timer: 1000
                    }).then(() => {
                        location.href = '/orderSuccess'
                    })
                } else {
                    razorpayPayment(response.response)
                }
            }
        })
    })

    /////////////////////////////////////////////////////////////////

    <i class="mdi mdi-account-circle"></i>

    ///////////////////////////////////////////////////

    access_token$sandbox$gw5pfp38yq9fwq7k$6af7535703fb4629737fb1748cbcb982

    client id : AWCJqHDXvtKctejRp5Cx9Oh_ueh-JJdF91j3fjU7mri_SpSw5Di195P1RX-Up6Z2rZzEifnFVtwihTBa

    secret : EMUF0Otrr0Mzdq-8uui29UdDp8ZaMdZEuzpLEZDj72cy4_V6pWAdjVKwxJT8_7LLvoXtj8oUm96IDxVl

/////////////////////////////////
data: [12, 19, 3, 5, 2, 3],
