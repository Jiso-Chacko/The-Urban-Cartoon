<style>
    .card {
        border-radius: 4px;
        background: #fff;
        box-shadow: 0 6px 10px rgba(0, 0, 0, .08), 0 0 6px rgba(0, 0, 0, .05);
        transition: .3s transform cubic-bezier(.155, 1.105, .295, 1.12), .3s box-shadow, .3s -webkit-transform cubic-bezier(.155, 1.105, .295, 1.12);
        padding: 14px 80px 18px 36px;
        cursor: pointer;
    }

    .card:hover {
        box-shadow: 0 10px 20px rgba(0, 0, 0, .12), 0 4px 8px rgba(0, 0, 0, .06);
    }

    #imageUpload {
        display: none;
    }

    #profileImage {
        cursor: pointer;
    }
</style>



<!-- breadcrumb -->
<div class="bg-gray-13 bg-md-transparent">
    <div class="container">
        <!-- breadcrumb -->
        <div class="my-md-3">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-3 flex-nowrap flex-xl-wrap overflow-auto overflow-xl-visble">
                    <li class="breadcrumb-item flex-shrink-0 flex-xl-shrink-1"><a href="/">Home</a></li>
                    <li class="breadcrumb-item flex-shrink-0 flex-xl-shrink-1 " aria-current="page">
                        <a href="/viewProfile/:{{userId}}">My Account</a>
                    </li>
                    <li class="breadcrumb-item flex-shrink-0 flex-xl-shrink-1 active" aria-current="page"><a
                            href="/viewProfile/:{{userId}}/address">View address</a>
                    </li>
                    <li class="breadcrumb-item flex-shrink-0 flex-xl-shrink-1 active" aria-current="page">Add new address
                    </li>
                </ol>
            </nav>
        </div>
        <!-- End breadcrumb -->
    </div>
</div>
<!-- End breadcrumb -->

<div class="container rounded bg-white mt-5 mb-5">
    <div class=" mb-3">
        <h1 class="text-center">Add new address</h1>
    </div>
    <div class="row">
        <div class="col-md-3 ">

        </div>
        <div class="col-md-5 d-flex justify-content-center ml-10">
            <div class="p-3 py-5">
                <div class="card" style="width: 50rem;">
                    <div class="card-body">

                        <form id="MyForm" action="/addNewAddress" method="POST" name="MyForm">

                            <div class="col-md-8 mt-5">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        Address type
                                        <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-control required" name="addressType" id="addressType">
                                        <option value="">Select address type</option>
                                        <option value="home">home</option>
                                        <option value="office">office</option>
                                        <option value="other">other</option>
                                    </select>
                                    <span style="color: brown;" id="selectErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>

                            <div class="col-md-8 mt-5">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        Address
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" class="form-control" name="address" placeholder="Address"
                                        id="address" aria-label="470 Lucy Forks"
                                        data-msg="Please enter a valid address." data-error-class="u-has-error"
                                        data-success-class="u-has-success">
                                    <span style="color: brown;" id="addressErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>



                            <div class="col-md-6">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        City
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" class="form-control" name="city" aria-label="London" id="city"
                                        data-error-class="u-has-error" placeholder="City"
                                        data-success-class="u-has-success" autocomplete="off">
                                    <span style="color: brown;" id="cityErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>

                            <div class="col-md-6">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        District
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" class="form-control" name="district" placeholder="District"
                                        id="district" data-error-class="u-has-error" data-success-class="u-has-success"
                                        autocomplete="off">
                                    <span style="color: brown;" id="districtErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>

                            <div class="col-md-6">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        Postcode/Zip
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" class="form-control" name="postcode" placeholder="Postcode"
                                        id="postcode" aria-label="99999" data-msg="Please enter a postcode or zip code."
                                        data-error-class="u-has-error" data-success-class="u-has-success">
                                    <span style="color: brown;" id="postcodeErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>

                            <div class="w-100"></div>

                            <div class="col-md-6">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        State
                                        <span class="text-danger">*</span>
                                    </label>

                                    <input type="text" class="form-control" name="state" placeholder="state" id="state"
                                        data-error-class="u-has-error" data-success-class="u-has-success">
                                    <span style="color: brown;" id="stateErr"></span>

                                </div>
                                <!-- End Input -->
                            </div>

                            <div class="col-md-6">
                                <!-- Input -->
                                <div class="js-form-message mb-6">
                                    <label class="form-label">
                                        Email address
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="email" class="form-control" name="email" placeholder="Email" id="email"
                                        aria-label="jackwayley@gmail.com" data-msg="Please enter a valid email address."
                                        data-error-class="u-has-error" data-success-class="u-has-success">
                                    <span style="color: brown;" id="emailErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>

                            <div class="col-md-6">
                                <!-- Input -->
                                <div class="js-form-message mb-6">

                                    <label class="form-label">
                                        Phone
                                    </label>

                                    <input type="text" class="form-control" placeholder="Phone" name="phone" id="phone"
                                        aria-label="+1 (062) 109-9222" data-msg="Please enter your last name."
                                        data-error-class="u-has-error" data-success-class="u-has-success">
                                    <span style="color: brown;" id="phoneErr"></span>
                                </div>
                                <!-- End Input -->
                            </div>

                    </div>

                    {{!-- <div class="mt-5 text-center"><a class="btn btn-primary profile-button" style="cursor: pointer;" href="/editProfile">Edit Profile </a>  --}}
                    <div>
                        <div class="mt-5 text-center"><button type="submit" class="btn btn-primary profile-button">Add
                                address</button></div>

                    </div>

                    </form>
                </div>
            </div>

        </div>
    </div>
</div>
</div>

{{#if addressErr}}
<script>
    Swal.fire({
        position: 'center',
        icon: 'error',
        title: 'Address limit achieved!',
        showConfirmButton: false,
        timer: 1000
    })
</script>
{{/if}}

<script>
    MyForm.addEventListener('submit', (e) => {
        console.log("form validation")

        var address = document.getElementById('address').value
        var city = document.getElementById('city').value
        var district = document.getElementById('district').value
        var postcode = document.getElementById('postcode').value
        var state = document.getElementById('state').value
        var email = document.getElementById('email').value
        var phone = document.getElementById("phone").value
        var select = document.getElementById("addressType").value
        var regx =
            /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        var pattern = /^[6-9]\d{9}$/;

        if (address.trim() == "" || address < 2) {
            document.getElementById('address').focus()
            document.getElementById('addressErr').innerHTML = "Enter valid address"
            e.preventDefault()
        } else {
            document.getElementById('addressErr').innerHTML = ""
        }

        if (city.trim() == "" || city < 2) {
            document.getElementById("city").focus()
            document.getElementById('cityErr').innerHTML = "Enter valid city name"
            e.preventDefault()
        } else {
            document.getElementById('cityErr').innerHTML = ""
        }

        if (district.trim() == "" || district < 2) {
            document.getElementById("district").focus()
            document.getElementById('districtErr').innerHTML = "Enter valid district name"
            e.preventDefault()
        } else {
            document.getElementById('districtErr').innerHTML = ""
        }

        if (state.trim() == "" || state < 2) {
            document.getElementById("state").focus()
            document.getElementById('stateErr').innerHTML = "Enter valid state name"
            e.preventDefault()
        } else {
            document.getElementById('stateErr').innerHTML = ""
        }

        if (postcode.trim() == "" || isNaN(postcode)) {
            document.getElementById("postcode").focus()
            document.getElementById('postcodeErr').innerHTML = "Enter valid postcode"
            e.preventDefault()
        } else {
            document.getElementById('postcodeErr').innerHTML = ""
        }

        if (email.trim() == "" || !email.match(regx)) {
            document.getElementById("email").focus()
            document.getElementById('emailErr').innerHTML = "Enter valid email"
            e.preventDefault()
        } else {
            document.getElementById('emailErr').innerHTML = ""
        }

        if (phone.trim() == "" || isNaN(phone) || !phone.match(pattern)) {
            document.getElementById("phone").focus()
            document.getElementById('phoneErr').innerHTML = "Enter valid phonenumber"
            e.preventDefault()
        } 
        else {
            document.getElementById('phoneErr').innerHTML = ""
        }
        if(select == "" ){
            alert('please select a valid address type!')
            document.getElementById("addressType").focus()
            document.getElementById("selectErr").innerHTML = "Please select valid address type"
            e.preventDefault()
        }
        else{
            document.getElementById("selectErr").innerHTML = ""
        }
    })
</script>