<div class="container">


    <div class="col-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Add Product</h4>
                {{!-- <p class="card-description"> Basic form elements </p> --}}
                <form class="forms-sample" method="POST" action="/admin/addProduct" enctype="multipart/form-data" name="addProductForm">

                    <div class="form-group">
                        <label for="exampleInputName1">Name of Product</label>
                        <input type="text" class="form-control" id="productName" placeholder="Product name"
                            name="productName" >
                            <span id="productNameErr"></span>
                    </div>

                    <div class="form-group">
                        <label for="exampleInputName1">Product Title</label>
                        <input type="text" class="form-control" id="productTitle" placeholder="Product title"
                            name="productTitle" >
                            <span id="productTitleErr"></span>
                    </div>
                    <div class="d-flex">
                        <div class="form-check mb-2">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" value="featured" name="featured">
                                Featured </label>
                        </div>
                        <div class="form-check ml-4 mb-2">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input " value="onSale" name="onSale"> On sale
                            </label>
                        </div>
                        <div class="form-check ml-4 mb-2">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input " value="topRated" name="topRated"> Top
                                rated </label>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="exampleTextarea1">Description</label>
                        <textarea class="form-control" id="description" rows="4" name="description"
                            ></textarea>
                            <span id="descriptionErr"></span>
                    </div>

                    <div class="form-group">
                        <label for="exampleInputPrice1">Price</label>
                        <input type="text" class="form-control" id="price" placeholder="Price" name="price"
                            >
                            <span id="priceErr"></span>
                    </div>

                    <div class="form-group">
                        <label for="exampleInputQuantiity1">Quantity</label>
                        <input type="text" class="form-control" id="quantity" placeholder="Quantity"
                            name="quantity" >
                            <span id="quantityErr"></span>
                    </div>
                    <div class="form-group">
                        <label for="exampleSelectCategory">Category</label>
                        <select class="form-control" id="change_category" name="category" onchange="addProductSpec(this.value)">
                            <option value="">Select Category</option>
                            {{#each category}}
                            <option value="{{this.categoryName}}">{{this.categoryName}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="exampleSelectBrand">Brand</label>
                        <select class="form-control" id="category_brand" name="brand">
                            <option></option>
                        </select>
                    </div>


                    {{!-- <div class="form-group">
                        <label for="exampleSelectBrand">Brand</label>
                        <select class="form-control" id="exampleSelectBrand" name="brand">
                            {{#if smartphoneTrue}}

                            <option></option>
                            {{/if}}

                            {{#if laptopTrue}}
                            <option></option>
                            {{/if}}
                        </select>
                    </div> --}}


                    <div id="titleMobile"></div>
                    <div id="mobile"></div>
                    <div id="titleLaptop"></div>
                    <div id="laptop"></div>


                    <div class="row form-group">
                        <div class="col col-md-3">

                            <label for="file-input" class=" form-control-label">Image1</label>
                        </div>
                        <div class="col-12 col-md-9">
                            <img style="width: 3rem; margin: 10px" src="" id="img1">
                            <input required type="file" id="fileinputimage1" name="fileinputimage1"
                                class="form-control-file" onchange="viewimage1(event)">
                            {{!-- <textarea name="pro_img1" id="pro_img1" style="display: none;"></textarea> --}}
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col col-md-3">
                            <label for="file-input" class=" form-control-label">Image2</label>
                        </div>
                        <div class="col-12 col-md-9">
                            <img style="width: 3rem; margin: 10px" src="" id="img2">
                            <input required type="file" id="fileinputimage2" name="fileinputimage2"
                                class="form-control-file" onchange="viewimage2(event)">
                            {{!-- <textarea name="pro_img2" id="pro_img2" style="display: none;"></textarea> --}}
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col col-md-3">
                            <label for="file-input" class=" form-control-label">Image3</label>
                        </div>
                        <div class="col-12 col-md-9">
                            <img style="width: 3rem; margin: 10px" src="" id="img3">
                            <input required type="file" id="fileinputimage3" name="fileinputimage3"
                                class="form-control-file" onchange="viewimage3(event)">
                            {{!-- <textarea name="pro_img3" id="pro_img3" style="display: none;"></textarea> --}}
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col col-md-3">
                            <label for="file-input" class=" form-control-label">Image4</label>
                        </div>
                        <div class="col-12 col-md-9">
                            <img style="width: 3rem; margin: 10px" src="" id="img4">
                            <input required type="file" id="fileinputimage4" name="fileinputimage4"
                                class="form-control-file" onchange="viewimage4(event)">
                        </div>
                    </div>

                    <div id="submitdiv">
                        <button type="submit" class="btn btn-gradient-primary mr-2">Submit</button>

                        <button class="btn btn-light">Cancel</button>
                    </div>


                </form>






            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="/cropper/cropper.min.js" type="text/javascript"></script>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/canvasjs/1.7.0/canvasjs.min.js"></script>

<script>

    // dynamic dropdown
    $('#change_category').change(function (e) {
        var category = $(this).val();
        $.ajax({
            url: "/admin/getbrands/" + category,
            method: "GET",
            success: function (result) {
                let str = '<option value="">Select Brand</option>';
                for (var i=0; i< result.brand.length;i++){
                    let brandName = result.brand[i]
                    str += `<option value="${brandName}">${brandName}</option>`
                }
                $('#category_brand').html(str);

            }
        })
    })


    // form validation 
    document.addProductForm.addEventListener("submit", function(event){
        var productName = this.querySelector("input[id=productName]").value;
        var productTitle = this.querySelector("input[id=productTitle]").value;
        var description = this.querySelector("input[id=description]").value;
        var price = this.querySelector("input[id=price]").value;
        var quantity = this.querySelector("input[id=quantity]").value;
        
        

        if(productName.trim() == " " || productName.length < 3){
            document.getElementById("productName").focus
            if(productName == ""){
            document.getElementById("productNameErr").innerHTML = "Filed cannot be empty"
            }else if(productName.length < 3){
             document.getElementById("productNameErr").innerHTML = "Minimum length required"   
            }
            event.preventDefault();
        }
        if(productTitle.trim() == " " || productTitle.length < 5){
            document.getElementById("productTitle").focus
            if(productTitle == ""){
            document.getElementById("productNameErr").innerHTML = "Filed cannot be empty"
            }else if(productTitle.length < 3){
             document.getElementById("productNameErr").innerHTML = "Minimum length required"   
            }
            event.preventDefault()
        }
        if(description.trim() == " " || description.length < 8){
            document.getElementById("productTitle").focus
            if(description == ""){
            document.getElementById("productNameErr").innerHTML = "Filed cannot be empty"
            }else if(description.length < 3){
             document.getElementById("productNameErr").innerHTML = "Minimum length required"   
            }
            event.preventDefault()
        }
       
    })

    function viewimage1(event) {
        document.getElementById('img1').src = URL.createObjectURL(event.target.files[0])
    }

    function viewimage2(event) {
        document.getElementById('img2').src = URL.createObjectURL(event.target.files[0])
    }

    function viewimage3(event) {
        document.getElementById('img3').src = URL.createObjectURL(event.target.files[0])
    }

    function viewimage4(event) {
        document.getElementById('img4').src = URL.createObjectURL(event.target.files[0])
    }


    function addProductSpec(value) {
        console.log('This is' + value)

        if (value == "smartphone") {

            document.getElementById('laptop').innerHTML = '';
            document.getElementById('titleLaptop').innerHTML = '';
            var selectedMobile = true;

            var thediv = document.getElementById('titleMobile');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Add smartphone Specs</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Model" id="model" class="form-control mb-5" name="model"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Dimension" id="dimension" class="form-control mb-5" name="dimension"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "size" id="size" class="form-control mb-5" name="size"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "color" id="color" class="form-control mb-5" name="color"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Technical Specifications</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Screen Type" id="screenType" class="form-control mb-5" name="screenType"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Camera rear" id="rearCamera" class="form-control mb-5" name="rearCamera"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Operating System" id="operatingSystem" class="form-control mb-5" name="operatingSystem"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item model" id="itemModel" class="form-control mb-5" name="itemModel"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Storage" id="storage" class="form-control mb-5" name="storage"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Processor" id="processor" class="form-control mb-5" name="processor"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Ram" class="form-control mb-5" id="ram" name="ram"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('mobile');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Battery" class="form-control mb-5" id="Battery" name="battery"></input>'
            thediv.appendChild(extras)

        }

        if (value == "laptop") {
            document.getElementById('mobile').innerHTML = '';
            document.getElementById('titleMobile').innerHTML = '';
            
            var selectedLaptop = true;
            var thediv = document.getElementById('titleLaptop');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Add laptop Specs</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Processo Name" class="form-control mb-5" id="processorName" name="processorName"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Screen Size" class="form-control mb-5" id="screenSize" name="screenSize"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Hard disk size" class="form-control mb-5" id="hardDiskSize" name="hardDiskSize"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Operating System" class="form-control mb-5" id="operatingSystem" name="operatingSystem"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML = '<h4>Technical Specifications</h4>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Weight" class="form-control mb-5" id="weight" name="weight"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Product dimensions" class="form-control mb-5" id="productDimensions" name="productDimensions"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Item model name" class="form-control mb-5" id="itemModelName" name="itemModelName"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Ram" class="form-control mb-5" id="ram" name="ram"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Hard Drive Size" class="form-control mb-5" id="hardDriveSize" name="hardDriveSize"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Processor Speed" class="form-control mb-5" id="processorSpeed" name="processorSpeed"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Resolution" class="form-control mb-5" id="resolution" name="resolution"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Display Technology" class="form-control mb-5" id="displayTech" name="displayTech"></input>'
            thediv.appendChild(extras)

            var thediv = document.getElementById('laptop');
            var extras = document.createElement('div');
            extras.innerHTML =
                '<input type="text" style = "width:400px" placeholder = "Battery Average Life" class="form-control mb-5" id="batteryAverageLife" name="batteryAverageLife"></input>'
            thediv.appendChild(extras)

        }

    }


</script>